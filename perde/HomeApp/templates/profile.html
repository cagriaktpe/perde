{% extends 'base.html' %}


{% block content %}
  <h2>Profile</h2>

  <style>
    .profile-container {
  display: flex;
  justify-content: center;
  align-items: center;
}

.info-container {
  width: 400px;
  padding: 20px;
  background-color: #f5f5f5;
  border-radius: 8px;
}

.form-container {
  width: 400px;
  padding: 20px;
  background-color: #f5f5f5;
  border-radius: 8px;
  margin-bottom: 20px;
}

table {
  width: 100%;
  border-collapse: collapse;
  margin-bottom: 20px;
}

tr:nth-child(even) {
  background-color: #f9f9f9;
}

th, td {
  padding: 8px;
  text-align: left;
}

.label {
  font-weight: bold;
  width: 120px;
}

.edit-btn {
  padding: 8px 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.update-btn {
  padding: 8px 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-right: 10px;
}

.cancel-btn {
  padding: 8px 16px;
  background-color: #ccc;
  color: white;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

.button-container {
  display: flex;
  justify-content: flex-end;
  margin-top: 10px;
}
  </style>

<div class="profile-container">
    {% if editing %}
      <div class="form-container">
        <form method="post">
          {% csrf_token %}
          {{ form.as_p }}
          <div class="button-container">
            <button class="update-btn" type="submit">Update Profile</button>
            <a href="{% url 'profile' %}" class="cancel-btn">Cancel</a>
          </div>
        </form>
      </div>
    {% else %}
      <div class="info-container">
        <table>
          <tr>
            <td class="label">Name:</td>
            <td>{{ user.first_name }}</td>
          </tr>
          <tr>
            <td class="label">Surname:</td>
            <td>{{ user.last_name }}</td>
          </tr>
          <tr>
            <td class="label">Joined Date:</td>
            <td>{{ user.date_joined }}</td>
          </tr>
          <tr>
            <td class="label">Email:</td>
            <td>{{ user.email }}</td>
          </tr>
          <tr>
            <td class="label">Favourite Movies:</td>
            <td>{{ movie.title }}</td>
          </tr>
          <tr>
            <td class="label">Favourite Actors:</td>
            <td>{{ actor.name }}</td>
          </tr>
          <tr>
            <td class="label">Watchlist:</td>
            <td></td>
          </tr>
          <tr>
            <td class="label">Past Comments:</td>
            <td></td>
          </tr>
        </table>
        <button class="edit-btn" onclick="editProfile()">Edit</button>
      </div>
    {% endif %}
  </div>

  <script>
    function editProfile() {
      var form = document.createElement("form");
      form.method = "post";
      form.action = "{% url 'profile' %}";
      form.className = "form-container";
      form.innerHTML = `
        {% csrf_token %}
        {{ form.as_p }}
        <div class="button-container">
          <button class="update-btn" type="submit">Update Profile</button>
          <a href="{% url 'profile' %}" class="cancel-btn">Cancel</a>
        </div>
      `;
      document.querySelector(".info-container").replaceWith(form);
    }
  </script>
{% endblock %}
